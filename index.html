<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Minecraft Skin Galerie</title>
  <style>
    body {
      font-family: sans-serif;
      background: #111;
      color: white;
      margin: 0;
      padding: 1rem;
    }

    h1 {
      margin-bottom: 1rem;
    }

    #uploadContainer {
      margin-bottom: 2rem;
    }

    #skinGrid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 12px;
    }

    .skinItem {
      width: 160px;
      height: 160px;
      overflow: hidden;
      background: #222;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      cursor: pointer;
    }

    .skinItem img {
      max-height: 128px;
      width: auto;
      object-fit: contain;
      margin-bottom: 4px;
    }

    .skinItem span {
      font-size: 0.9rem;
      color: #ccc;
      text-align: center;
    }

    /* Modal */
    #skinModal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.8);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    #modalContent {
      background: #222;
      display: flex;
      padding: 1rem;
      border-radius: 10px;
      max-width: 600px;
      width: 90%;
    }

    #modalLeft img {
      max-width: 200px;
      height: auto;
    }

    #modalRight {
      margin-left: 2rem;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .modalButton {
      background: #444;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      margin-top: 0.5rem;
      border-radius: 5px;
      cursor: pointer;
    }

    .modalButton:hover {
      background: #666;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <h1>Minecraft Skins</h1>

  <!-- Nur du siehst das hier -->
  <div id="uploadContainer">
    <input type="file" id="skinInput" accept="image/png">
    <input type="text" id="skinName" placeholder="Name eingeben">
    <button onclick="uploadSkin()">Hochladen</button>
  </div>

  <div id="skinGrid"></div>

  <!-- Modal -->
  <div id="skinModal">
    <div id="modalContent">
      <div id="modalLeft">
        <img id="modalImage" src="" alt="Skin">
      </div>
      <div id="modalRight">
        <div id="modalName">Skinname</div>
        <button class="modalButton" id="downloadBtn">Download</button>
        <button class="modalButton hidden" id="deleteBtn">Löschen</button>
        <button class="modalButton" onclick="closeModal()">Schließen</button>
      </div>
    </div>
  </div>

  <script>
    const skinGrid = document.getElementById("skinGrid");
    const skinInput = document.getElementById("skinInput");
    const skinNameInput = document.getElementById("skinName");
    const modal = document.getElementById("skinModal");
    const modalImage = document.getElementById("modalImage");
    const modalName = document.getElementById("modalName");
    const downloadBtn = document.getElementById("downloadBtn");
    const deleteBtn = document.getElementById("deleteBtn");

    let currentSkinElement = null;
    const isAdmin = true; // Nur für dich

    function uploadSkin() {
      const file = skinInput.files[0];
      const name = skinNameInput.value.trim() || "Unbenannt";

      if (!file || file.type !== "image/png") {
        alert("Bitte wähle eine PNG-Datei aus.");
        return;
      }

      const reader = new FileReader();
      reader.onload = function(e) {
        const skinDiv = document.createElement("div");
        skinDiv.className = "skinItem";
        const img = document.createElement("img");
        img.src = e.target.result;
        img.alt = name;

        const label = document.createElement("span");
        label.textContent = name;

        skinDiv.appendChild(img);
        skinDiv.appendChild(label);
        skinDiv.dataset.name = name;
        skinDiv.dataset.src = e.target.result;

        skinDiv.addEventListener("click", () => openModal(skinDiv));
        skinGrid.appendChild(skinDiv);
      };
      reader.readAsDataURL(file);
    }

    function openModal(skinDiv) {
      currentSkinElement = skinDiv;
      modalImage.src = skinDiv.dataset.src;
      modalName.textContent = skinDiv.dataset.name;
      downloadBtn.onclick = () => downloadSkin(skinDiv.dataset.src, skinDiv.dataset.name + ".png");

      if (isAdmin) {
        deleteBtn.classList.remove("hidden");
        deleteBtn.onclick = () => {
          skinGrid.removeChild(skinDiv);
          closeModal();
        };
      } else {
        deleteBtn.classList.add("hidden");
      }

      modal.style.display = "flex";
    }

    function closeModal() {
      modal.style.display = "none";
    }

    function downloadSkin(url, filename) {
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      a.click();
    }
  </script>
</body>
</html>
